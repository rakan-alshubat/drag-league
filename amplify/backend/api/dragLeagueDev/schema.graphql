# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
# input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type Users @model @auth(rules: [{ allow: private, provider: userPools, operations: [create, update, delete, read] }]) {
  id: ID!
  name: String
  leagues: [String]
  followedLeagues: [String]
  pendingLeagues: [String]
}

type League @model @auth(rules: [
  { allow: public, provider: apiKey, operations: [read] },
  { allow: private, provider: userPools, operations: [create, update, delete, read] }
]) {
  id: ID!
  lgName: String!
  lgDescription: String
  lgAdmin: [String]!
  lgPendingPlayers: [String]
  lgFollowers: [String]
  lgHistory: [String]
  lgQueenNames: [String]
  lgPublic: Boolean
  lgFullyPrivate: Boolean
  lgChallengePoints: Int
  lgLipSyncPoints: Int
  lgBonusPoints: [String] 
  lgChallengeWinners: [String]
  lgLipSyncWinners: [String]
  lgEliminatedPlayers: [String]
  lgSwap: String
  lgSubmissions: [String]
  lgDeadline: String
  lgRankingDeadline: String
  lgFinished: String
  lgComments: [String] 
  lgPlayers: [Player] @hasMany(indexName: "byLeague", fields: ["id"])
}

type Player @model @auth(rules: [
  { allow: public, provider: apiKey, operations: [read] },
  { allow: private, provider: userPools, operations: [create, update, delete, read] }
]) {
  leagueId: ID! @index(name: "byLeague", sortKeyFields: [])
  league: League @belongsTo(fields: ["leagueId"])
  plEmail: String!
  plName: String
  plStatus: String
  plLipSyncAssassin: String
  plSwap: String
  plRankings: [String]
  plWinners: [String]
  plBonuses: [String]
}
